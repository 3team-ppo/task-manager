# Labs ППО

## Lab 1

- **Краткое описание Task Manager**

  Мы создаем систему управления задачами. В нашей системе только два типа пользователей - авторизованный (который прошел регистрацию и аутентифицировался) и гость. Единственное, что может гость - зарегистрироваться и стать авторизованным пользователем.

  Пользователи (авторизованные) могут создать проект, обозначив его название. При этом пользователь-создатель проекта становится участником этого проекта и может добавлять новых пользователей-участников проекта. Любые участники могут добавлять новых участников.

  Участники проекта могут создавать задачи внутри этого проекта, обозначая имя для задачи. В дальнейшем имя задачи может быть изменено на иное любым другим участником проекта.

  Кроме этого, любой из участников проекта может назначать других участников проекта исполнителями задачи. У задачи может быть 0 или более исполнителей.

  Задачу можно отметить как выполненную. Это тоже может сделать любой участник проекта. Если что-то пошло не так и задачу отметили как выполненную по ошибке, то можно вернуть задачу в работу.

- **Вопросы**
    1. Какие данные пользователя используются для регистрации
        1. Никнейм, пароль
    2. Если пользователь с таким никнеймом уже существует, как должна вести себя система?
        1. Отклонить запрос о регистрации, выдать информативное сообщение (формулировку сообщения можете выбрать по своему усмотрению)
    3. Тогда, вероятно, стоит добавить функцию проверки, существует ли пользователь с таким никнеймом?
        1. Да, стоит
    4. Как происходит процесс входа в систему (аутентификации)
        1. На данный момент мы не хотим реализовывать никакие механизмы аутентификации и авторизации. Необходимо будет реализовать только добавление пользователей в систему.
    5. Чтобы добавить в проект нового участника нужна возможность искать пользователя. Вероятно, проще всего искать будет по его имени и никнейму?
        1. Да, стоит добавить в пользователя атрибут “имя” и указывать его при регистрации. В это поле мы помещаем ФИО пользователя.
        2. Да, стоит реализовать функцию поиска участника. Давайте искать по полному совпадению или вхождению искомой строки в никнейм или имя пользователя
    6. Могут ли пользователи видеть проекты, участниками которых они не являются
        1. Да, для реализации минимального продукта мы не делаем никаких механизмов разграничения доступа (авторизации).
    7. Что предполагается показывать пользователю (какую страницу) после успешной аутентификации?
        1. Хотим показывать ему страницу со списком проектов, участником которых он является и кнопку "создать проект".
    8. Как сам проект должен отображаться в списке?
    9. Как в системе должна отображаться задача? Каким образом пользователь может может ее просмотреть? Могут ли видеть задачу пользователи, которые не являются участниками проекта, к которому относится задача? Могут ли видеть задачу пользователи, которые не являются ее создателем или исполнителем?
    10. Можно ли изменять название проекта?
    11. Чтобы назначить пользователя исполнителем задачи необходимо реализовать поиск так же как это было решено реализовать для добавления в проект нового участника(см. 5 вопрос)? То есть реализовать функцию поиска участника полному совпадению или вхождению искомой строки в никнейм или имя пользователя?
    12. Из ответов на предыдущие вопросы мы можем сделать вывод, что пользователя можно уникально идентифицировать по его никнейму? Или уникальным идентификатором пользователя в системе должно являться отдельное поле по типу ID?
    13. Как должно происходить изменение статуса задач? Пользователь может ввести статус вручную или выбрать из списка?
    14. Можно ли создавать проекты и задачи с одинаковыми названиями? Могут ли в рамках одного проекта существовать задачи с одинаковыми названиями? Если да, то каким образом задачи и проекты должны уникально идентифицироваться в системе?
    15. Можно ли удалять исполнителя/исполнителей задачи?
    16. Можно ли назначить себя на задачу?
    17. Можно ли удалять участников проекта? Можно ли в таком случае удалить всех участников в том числе и пользователя-создателя? Что в таком случае должно происходить с проектом?

- **Функциональные требования**

  *Пользователь должен иметь возможность…*

    1. “Гость” может направить запрос в систему, существует ли уже пользователь с переданным никнеймом и получить ответ в формате “true”/”false”
    2. Пройти регистрацию в системе, сменив статус “гостя” на “пользователя” системы, передав никнейм, имя и пароль.
        1. Операция отклоняется с информативным сообщением, если пользователь с таким ником уже существует.
    3. Создать проект, передав название проекта и никнейм пользователя-создателя проекта.
    4. Создать задачу в проекте, передав название проекта и название задачи. Задача создается в статусе “не выполнено”.
    5. Изменять список пользователя(-ей) исполнителей задачи: добавить или удалить исполнителя, передав название задачи и никнем(-ы) пользователя(-ей), если задача в статусе “не выполнено”.
    6. Найти пользователя в поиске при добавлении нового участника в проект. Поиск должен происходить по полному совпадению или вхождению искомой строки в никнейм или имя пользователя.
    7. Изменить статус задачи, передав ее название и новый статус.
    8. Изменить название уже существующей задачи, передав текущее название задачи и новое название.
    9. Добавлять новых участников проекта, выбрав их из списка, где можно найти нужного пользователя по имени или никнейму, передав название проекта и никнеймы пользователей.

## Lab2

| Термин  | Краткое пояснение | Атрибуты                                                                                                                                                         | Ассоциированные термины                                                                                                                                                                             | Действия над предметом                                                                                                                                                                                                                                                                                                                                                                                           |
| :---- | :---- |:-----------------------------------------------------------------------------------------------------------------------------------------------------------------|:----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Пользователь (User) | существующий (зарегистрированный) в системе пользователь | - ID<br/> - Имя<br/> - Никнейм <br/>- Пароль                                                                                                                     | - Гость <br/>- Участник <br/>- Исполнитель <br/><br/>Авторизовавшись или пройдя регистрацию гость становится пользователем. Пользователь может становится исполнителем задачи и участником проекта. | - Добавление в проект (участник проекта → *добавляет в проект* → пользователя (пользователь становится участником)). <br/><br/>- Поиск участника для добавления в проект или задачу (участник проекта → *ищет* → *участника по никнейму или имени*). <br/><br/>- Назначить исполнителем задачи(участник проекта → *назначает исполнителем задачи* → пользователя (пользователь становится исполнителем задачи)). |
| Гость (Guest) | Посетитель сайта, который не аутентифицирован. Ему нужно пройти регистрацию или ввести свои данные (никнейм и пароль). Не имеет идентичности все гости одинаковы |                                                                                                                                                                  | - Пользователь <br/><br/>Авторизовавшись или пройдя регистрацию гость становится пользователем.                                                                                                     | - Регистрация в системе(гость → *регистрируется* (гость становится пользователем)) <br/><br/>- Авторизация в системе(гость → *авторизируется* (гость становится пользователем))                                                                                                                                                                                                                                            |
| Проект (Project) | Логическая сущность, которая объединяет в себе некоторое количество *участников* проекта (они являются *пользователями*), которые могут создавать *задачи внутри* этого проекта, а также задачи проекта. Соответственно, только участники проекта могут просматривать его содержимое и изменять его. | - ID <br/>- Имя <br/>- Создатель <br/>- Дата создания <br/>- Дата последнего изменения <br/>- Участники                                                          | - Участник <br/>- Создатель  <br/> - Задача <br/><br/> В проекте есть участники и задачи, которые относятся к данному проекту                                                                       | - Создание (пользователь → *создает* → проект).  <br/><br/>- Изменение названия (пользователь создатель → *изменяет название* → проекта).  <br/><br/>- Удаление (пользователь создатель → *удаляет* → проект).  <br/><br/>- Просмотр (участник проекта → *просматривает* → проект).  <br/><br/>- Добавление участников (участник проекта → *добавляет участников* → в проект).                                   |
| Задача(Task) | Логическая сущность, содержащая информацию о конкретной задаче в рамках проекта. Содержит информацию для отслеживания выполнения данной задачи.  | - ID <br/>- Имя <br/>- Статус <br/>- Приоритет <br/>- Создатель <br/>- Дата создания <br/>- Дата последнего изменения <br/>- Оценка по времени <br/>-Исполнители | - Исполнитель <br/>- Создатель <br/>- Проект <br/><br/>Задача относится к определенному проекту. Исполнители относятся к определенной задаче.                                                       | \- Создание (участник проекта → *создает* → задачу).  <br/><br/>- Изменение (участник проекта → *изменяет* → задачу).  <br/><br/>- Удаление (участник проекта → *удаляет* → задачу).  <br/><br/>- Просмотр (участник проекта → *просматривает* → задачу).  <br/><br/>- Назначение исполнителя (участник проекта → *назначает исполнителя* → задачи).                                                             |
| Исполнитель(Assignee) | Пользователь, назначенный исполнителем на конкретную задачу.  |                                                                                                                                                                  | \- Задача <br/>- Пользователь <br/><br/>Исполнитель относится к определенной задаче. Исполнитель является пользователем.                                                                            | - Назначение исполнителя (участник проекта → *назначает* → исполнителя).                                                                                                                                                                                                                                                                                                                                         |
| Участник(Participant) | Пользователь добавленный в проект и способный производить внутри него действия с задачами и добавлять новых участников. |                                                                                                                                                                  | - Проект <br/>- Пользователь <br/><br/>Участник является пользователем. Участник относится к определенному проекту.                                                                                 | - Добавление участников (участник проекта → *добавляет* → участников).                                                                                                                                                                                                                                                                                                                                           |
| Создатель(Creator) | Пользователь, создавший проект или задачу в проекте. |                                                                                                                                                                  | - Проект <br/>- Пользователь <br/>- Задача <br/><br/>Создатель является пользователем, создавшим задачу или проект.                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                  || \- Прохождение (гость → *проходит*→ регистрацию).                                                                                                                                                                                                                                                                                                                                                                                                                                       |


| Название контекста | Краткое пояснение | Язык контекста                                                                                                                                                                                          |
| :---- | :---- |:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Контекст пользователей(UserContext) | Этот контекст отвечает за управление пользователями системы, их регистрацией.  | - Пользователь   <br/>- Гость   <br/>- Регистрация   <br/>- Авторизация                                                                                                                                 |
| Контекст Проектов (Project Context)  | Контекст, который управляет проектами, их созданием и участниками.  | \- Проект   <br/>- Создатель   <br/>- Участник   <br/>- Изменение названия   <br/>- Добавление участника   <br/>- Удаление проекта   <br/>- Поиск пользоватлей                                          |
| Контекст Задач (Task Context)  | Этот контекст управляет задачами в рамках проектов, включая их создание и изменение.  | \- Задача   <br/>- Создатель   <br/>- Исполнитель   <br/>- Назначение исполнителя    <br/>- Изменение задачи   <br/>- Удаление задачи   <br/>- Поиск пользоватлей                                                                   |
| Контекст Управления Задачами (Task Management Context)  | Контекст, который охватывает действия, связанные с управлением задачами, такими как назначение исполнителей и изменение статусов задач.  | - Исполнитель  <br/>- Задача  <br/>- Назначение исполнителей   <br/>- Изменение имени задачи   <br/>- Изменение статуса задачи   <br/>- Изменение приоритета задачи  <br/>- Изменение оценки по времени |

## Lab 4
**Анализ функциональных требований:**
  1. Гость может направить запрос в систему, существует ли уже пользователь с переданным никнеймом и получить ответ в формате “true”/”false”

     1. **Сущности:** Пользователь (User)

     2. **Требуемые изменения:** Отсутствуют

     3. **Неизменяемые сущности:** Текущий пользователь (User)

     4. **Контекст:** Контекст пользователей (UserContext)

  2. Пройти регистрацию в системе, сменив статус “гостя” на “пользователя” системы, передав никнейм, имя и пароль

     1. **Сущности:** Пользователь (User)

     2. **Требуемые изменения:** Добавление нового пользователя с никнеймом, именем и паролем.

     3. **Контекст:** Контекст пользователей (UserContext)

  3. Операция отклоняется с информативным сообщением, если пользователь с таким ником уже существует

     1. **Сущности:** Пользователь (User)

     2. **Требуемые изменения:** Отсутствуют

     3. **Неизменяемые сущности:** Текущий пользователь (User)

     4. **Контекст:** Контекст пользователей (UserContext)
     
  4. Создать проект, передав название проекта и ID пользователя-создателя проекта

     1. **Сущности:** Проект (Project), Пользователь (User)

     2. **Требуемые изменения:** Создание новой записи проекта с указанием ID создателя, Добавление создателя в список участников проекта
 
     3. **Контекст:** Контекст проектов (Project Context)

     4. **Инварианты:** Проект должен быть привязан к существующему пользователю, пользователь, создающий проект, должен быть добавлен в список участников проекта.
     
     5. **Требуется ли транзакционность:** Да, операция требует транзакционности. Обе сущности (проект и пользователь) должны быть обновлены в рамках одной транзакции, чтобы избежать ситуации, когда проект создается, но пользователь не добавляется в список участников, или наоборот. Это обеспечит согласованное состояние данных. 
     
     6. **Строгая согласованность:** Обе операции — создание проекта и привязка пользователя к проекту — должны происходить в рамках одной транзакции. Если только одна из этих операций произойдет, система может оказаться в неконсистентном состоянии.
 
  5. Создать задачу в проекте, передав ID проекта и название задачи. Задача создается в статусе “не выполнено”

     1. **Сущности:** Задача (Task), Проект(Project)

     2. **Требуемые изменения:** Создание новой записи задачи, связанной с проектом, с присвоением статуса "не выполнено". Обновление списка задач в проекте.

     3. **Контекст:** Контекст проектов (Project Context), Контекст задач (Task Context)

     4. **Инварианты:** Задача должна быть привязана к существующему проекту. Проект должен содержать обновленный список задач с добавленной новой задачей.
    
     5. **Требуется ли транзакционность:** Да, транзакционность требуется. Необходимо, чтобы задача и обновленный список задач проекта сохранялись одновременно. Это предотвратит ситуацию, когда задача создается, но не добавляется в проект, или проект обновляется, но задача не создается.
     
     6. **Строгая согласованность:** Создание задачи и обновление списка задач в проекте должны происходить одновременно.
  6. Изменять список пользователя(-ей) исполнителей задачи: добавить или удалить исполнителя, передав ID задачи и ID пользователя(-ей), если задача в статусе “не выполнено”

     1. **Сущности:** Задача (Task), Пользователь (User).

     2. **Требуемые изменения:** Обновление списка исполнителей в задаче.

     3. **Контекст:** Контекст пользователей (User Context), Контекст задач (Task Context)

     4. **Инварианты:** Пользователи, которых добавляют или удаляют, должны существовать в системе. Задача должна находиться в статусе "не выполнено" для того, чтобы можно было изменять список исполнителей.

     5. **Требуется ли транзакционность:** Да, требуется транзакционность для одновременного обновления задачи и проверки статуса задачи (чтобы она была в статусе "не выполнено") и пользователей, которые добавляются как исполнители. Это важно для предотвращения добавления исполнителей к задачам, которые не находятся в допустимом статусе.

     6. **Строгая согласованность:** Операция по изменению списка исполнителей и проверка статуса задачи должны происходить синхронно. Это необходимо для того, чтобы предотвратить добавление исполнителей к задачам в некорректном статусе.
     
  7. Найти пользователя в поиске, написав имя или никнейм

     1. **Сущности:** Пользователь (User).

     2. **Требуемые изменения:** Отсутствуют

     3. **Неизменяемые сущности:** Текущий пользователь (User)

     4. **Контекст:** Контекст пользователей (User Context)

  8. Изменить статус задачи, передав ее id и новый статус

     1. **Сущности:** Задача (Task), Проект (Project).

     2. **Требуемые изменения:** Обновление статуса задачи на новый.

     3. **Контекст:** Контекст управления задачами (Task Management Context), Контекст проектов (Project Context)

  9. Изменить название уже существующей задачи, передав ID задачи и новое название

     1. **Сущности:** Задача (Task).

     2. **Требуемые изменения:** Обновление атрибута "название" у задачи.

     3. **Контекст:** Контекст управления задачами (Task Context)

  10. Добавлять новых участников проекта, выбрав их из списка, где можно найти нужного пользователя по имени или никнейму, передав ID проекта и ID пользователей

      1. **Сущности:** Проект (Project), Пользователь (User).

      2. **Требуемые изменения:** Обновление списка участников проекта с добавлением новых пользователей.

      3. **Контекст:** Контекст проектов (Project Context), Контекст пользователей (User Context)

      4. **Инварианты:** Все добавляемые пользователи должны существовать в системе. Каждый пользователь может быть добавлен в проект только один раз.

      5. **Требуется ли транзакционность:** Да, транзакционность требуется для того, чтобы гарантировать, что список участников проекта и информация о пользователях обновляются согласованно. Это исключает ситуацию, когда участник добавляется в проект, но пользователь не существует, или данные проекта не обновлены.

      6. **Строгая согласованность:** Обновление списка участников проекта и привязка пользователей должны происходить атомарно

**Список агрегатов:**
  1. Агрегат "Пользователь" (User Aggregate)
     1. **Сущность:** Пользователь (User)
     2. **Контекст:** Контекст пользователей (UserContext)
     3. **Описание:** Управляет созданием, обновлением и поиском пользователей в системе. Все операции, связанные с регистрацией, проверкой никнейма и добавлением исполнителей, будут происходить в рамках этого агрегата.
  2. Агрегат "Проект" (Project Aggregate)
     1. **Сущности:** Проект (Project), Список участников (Users)
     2. **Контекст:** Контекст проектов (Project Context)
     3. **Описание:** Управляет созданием и обновлением проектов, включая список участников. Все операции, связанные с созданием проекта, изменением списка участников, и проверкой привязки пользователя к проекту, будут происходить в рамках этого агрегата. Включает контроль за консистентностью участников проекта.
3. Агрегат "Задача" (Task Aggregate)
     1. **Сущности:** Задача (Task), Пользователи (User IDs)
     2. **Контекст:** Контекст задач (Task Context), Контекст управления задачами (Task Management Context)
     3. **Описание:** Управляет созданием и изменением задач в проекте, включая список исполнителей и статусы задач. бновление названия задачи, изменение статуса и списка исполнителей будут происходить в рамках этого агрегата. Обеспечивает атомарные операции по добавлению исполнителей и проверке их статуса. Привязан к проекту через внешний ключ (ID проекта).
